<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>José Rizal — Europe Timeline (1882–1892)</title>
  <style>
    :root{
      --bg:#1b1410;
      --panel:#291e18;
      --muted:#8a6c5a;
      --accent:#c79a6b;
      --accent-2:#e0a76a;
      --text:#f4efe6;
      --shadow: rgba(0,0,0,0.6);
      --pin-size: 16px;
      --pin-size-active: 22px;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#0f0b09);color:var(--text);overflow: hidden;}
    .wrap{
      max-width:1400px;
      height: 100%;
      margin:0 auto;
      padding:24px;
      display:grid;
      grid-template-columns:340px 1fr;
      grid-template-rows: 1fr;
      gap:24px;
    }
    header.card{
      background:var(--panel);
      border-radius:14px;
      padding:20px;
      box-shadow:0 8px 30px var(--shadow);
      display: flex;
      flex-direction: column;
    }
    header h1{margin:0;font-size:22px;letter-spacing:0.3px;color: var(--accent-2);}
    header p{color:var(--muted);margin-top:8px;font-size:14px;line-height:1.5}
    .details{flex-grow: 1; overflow-y: auto; margin-top: 16px; padding-right: 10px;}
    .details h2{margin: 12px 0 4px; font-size: 18px;}
    .details .meta{color:var(--muted);font-size:13px; margin-bottom: 12px;}
    .details .body-text{line-height: 1.6; font-size: 15px;}
    .details .sources{margin-top:16px;font-size:12px;color:var(--muted);border-top: 1px solid rgba(255,255,255,0.05); padding-top: 12px;}
    .details .sources a{color: var(--accent); text-decoration: none;}
    .details .sources a:hover{text-decoration: underline;}

    .controls{display:flex;flex-wrap: wrap; gap:8px;margin:16px 0}
    .btn{background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.1);padding:8px 12px;border-radius:8px;color:var(--text);cursor:pointer; font-size: 13px;}
    .btn:hover{background:rgba(255,255,255,0.1);}
    .btn.active{background:linear-gradient(90deg,var(--accent) 0%, var(--accent-2) 100%);color:#2b1b14;font-weight:600;border-color: transparent;}

    .map-area{
      position:relative;
      border-radius:14px;
      height: 100%;
      box-shadow:0 8px 30px var(--shadow);
      background-color: #0f0b09;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="600" viewBox="0 0 1000 600"><path d="M499.9 599.9C223.8 599.9 0 465.6 0 299.9S223.8 0 499.9 0s500 134.3 500 299.9-223.9 300-500 300z" fill-opacity=".02" fill="%23fff"/><path d="M499.9 545.4C251.4 545.4 45.4 435.9 45.4 299.9S251.4 54.4 499.9 54.4s454.5 109.5 454.5 245.5-206 245.5-454.5 245.5z" fill-opacity=".02" fill="%23fff"/><path d="M499.9 490.9c-223.3 0-403.4-90-403.4-200.9S276.6 89.1 499.9 89.1s403.4 90 403.4 200.9-180.1 200.9-403.4 200.9z" fill-opacity=".02" fill="%23fff"/><path d="M499.9 436.4C302 436.4 140.9 376.1 140.9 300S302 163.6 499.9 163.6s359.1 60.3 359.1 136.4-261.2 136.4-359.1 136.4z" fill-opacity=".02" fill="%23fff"/><g fill="none" stroke="%23fff" stroke-opacity=".05"><path d="M500 0v600M0 300h1000M140.9 163.6C205.2 108 340 54.4 500 54.4s294.8 53.6 359.1 109.2"/><path d="M45.4 54.4C136.6 15.7 304.7 0 500 0s363.4 15.7 454.6 54.4M45.4 545.6c91.2 38.7 259.3 54.4 454.6 54.4s363.4-15.7 454.6-54.4M140.9 436.4c64.3 55.6 199.1 109.2 359.1 109.2s294.8-53.6 359.1-109.2"/></g></svg>');
      background-size: cover;
      background-position: center;
      overflow: hidden;
    }
    .map-svg{position: absolute; inset: 0; width: 100%; height: 100%;}
    .travel-route{stroke: var(--muted); stroke-width: 2px; fill: none; stroke-dasharray: 4; animation: dash 20s linear infinite;}
    @keyframes dash {to {stroke-dashoffset: -100;}}
    .pin{cursor: pointer; transition: all 0.3s ease;}
    .pin-circle{fill: var(--accent-2); r: calc(var(--pin-size) / 2);}
    .pin-pulse{fill: var(--accent-2); opacity: 0.2; r: calc(var(--pin-size) / 2); animation: pulse 2s infinite;}
    @keyframes pulse {0% {transform: scale(0.9); opacity: 0.2;} 70% {transform: scale(2.5); opacity: 0;} 100% {transform: scale(2.5); opacity: 0;}}
    .pin.active .pin-circle{fill: var(--accent); r: calc(var(--pin-size-active) / 2); filter: drop-shadow(0 0 8px var(--accent));}
    .pin.active .pin-pulse{display: none;}
    .pin-year{fill: var(--text); font-size: 9px; font-weight: bold; text-anchor: middle; alignment-baseline: central; pointer-events: none;}
    footer{grid-column:1 / -1;color:var(--muted);font-size:12px;text-align:center;padding:16px 0;}

    @media (max-width:900px){
      body{overflow: auto;}
      .wrap{grid-template-columns:1fr; grid-template-rows: auto 1fr; padding: 12px; height: auto;}
      .map-area{min-height: 50vh;}
      header.card{height: auto;}
      .details{margin-top: 0; height: 300px; padding-right: 5px;}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header class="card">
      <div>
        <h1>José Rizal — Europe Timeline</h1>
        <p>An interactive map of Rizal's ten-year journey (1882–1892), from his departure from Manila to his pivotal years in Europe. Click any pin to explore events.</p>
        <div class="controls">
          <button class="btn" id="first">First</button>
          <button class="btn" id="prev">‹ Prev</button>
          <button class="btn" id="next">Next ›</button>
          <button class="btn" id="last">Last</button>
          <button class="btn" id="toggle-sources">Toggle Sources</button>
        </div>
      </div>
      <div class="details" id="details">
        <h2 id="d-title">Select an event</h2>
        <div class="meta" id="d-sub"></div>
        <p class="body-text" id="d-body">Click any numbered pin on the map to view the details here. The timeline covers Rizal's studies, publications, and key milestones.</p>
        <div class="sources" id="d-sources"></div>
      </div>
    </header>

    <main class="map-area" id="map">
        <svg class="map-svg" id="map-svg" viewBox="0 0 1000 600" preserveAspectRatio="xMidYMid meet"></svg>
    </main>

  </div>

  <script>
    const events = [
      { id:1, year:1882, date:'May 3, 1882', place:'Manila', coords: {x:88, y:80}, title:'Departure from Manila', summary:'Left Manila aboard the Salvadora, keeping his departure secret from Spanish authorities.', details:'Rizal departed secretly on May 3, 1882, bound for Spain. This marked the beginning of his decade-long European journey focused on education, medical specialization, and reform writing.', sources:['https://travels-of-rizal.weebly.com/','https://philembassymadrid.com/rizals-madrid'] },
      { id:2, year:1882, date:'June 15, 1882', place:'Barcelona', coords: {x:48, y:52}, title:'Arrival in Barcelona; Amor Patrio', summary:'Arrived in Barcelona; wrote "Amor Patrio", his first article published in Diariong Tagalog.', details:'On June 15, Rizal reached Barcelona and soon after moved to Madrid to enroll at Universidad Central. He wrote the patriotic essay "Amor Patrio" and began connecting with Filipino reformists.', sources:['https://travels-of-rizal.weebly.com/'] },
      { id:3, year:1883, date:'1883', place:'Madrid', coords: {x:44, y:54}, title:'Student life in Madrid', summary:'Continued studies in Medicine and Philosophy, learned French, and took short trips to Paris.', details:'Rizal studied medicine and philosophy and letters, wrote essays and poems, and expanded his language skills — including French — taking short trips during breaks to Paris.', sources:['https://travels-of-rizal.weebly.com/'] },
      { id:4, year:1884, date:'1884', place:'Madrid', coords: {x:44.2, y:54.2}, title:'Academic Success & Social Life', summary:'Finished his Licentiate in Medicine and socialized with Filipino reformists despite financial struggles.', details:'By 1884 Rizal had completed his licentiate and participated in the Filipino intellectual scene in Madrid — toasting fellow artists like Juan Luna — while often relying on loans to survive.', sources:['https://knightsofrizal.be/'] },
      { id:5, year:1885, date:'1885', place:'Paris', coords: {x:48.5, y:42}, title:'Specializing in Ophthalmology', summary:'Finished his Licentiate in Philosophy and Letters; chose ophthalmology for his mother’s sake.', details:'Rizal decided to specialize in ophthalmology after completing his studies in Madrid, planning advanced training in Paris and Germany to treat his mother’s failing eyesight.', sources:['https://travels-of-rizal.weebly.com/'] },
      { id:6, year:1886, date:'1886', place:'Heidelberg', coords: {x:52, y:43}, title:'Study with Dr. Otto Becker', summary:'Studied at Heidelberg\'s University Eye Hospital and wrote "A Las Flores de Heidelberg".', details:'Rizal studied ophthalmology under the renowned Dr. Otto Becker in Heidelberg, trained with advanced microscopes, and wrote the poignant poem "A Las Flores de Heidelberg" reflecting his homesickness.', sources:['https://knightsofrizal.be/'] },
      { id:7, year:1886, date:'Late 1886', place:'Leipzig', coords: {x:55, y:39}, title:'Philosophy & Translations', summary:'Attended philosophy and history lectures; translated German works into Tagalog.', details:'In Leipzig, Rizal deepened his philosophical education, translated Schiller\'s William Tell and Andersen\'s fairy tales into Tagalog, and admired the German educational system.', sources:['https://knightsofrizal.be/'] },
      { id:8, year:1887, date:'March 1887', place:'Berlin', coords: {x:56, y:37}, title:'Publication of Noli Me Tángere', summary:'Joined scholarly societies and, with funding from Maximo Viola, published "Noli Me Tángere".', details:'In Berlin, Rizal became a member of the Anthropological and Ethnological societies. He completed his first novel, "Noli Me Tángere," which exposed the abuses of Spanish colonial rule and was published in March 1887.', sources:['https://travels-of-rizal.weebly.com/','https://knightsofrizal.be/'] },
      { id:9, year:1888, date:'May 1888', place:'London', coords: {x:46.5, y:39}, title:'Research at the British Museum', summary:'Researched Antonio de Morga\'s historical accounts of the Philippines and contributed to La Solidaridad.', details:'In London, Rizal spent countless hours at the British Museum annotating Morga\'s Sucesos de las Islas Filipinas. He also published numerous essays in the reformist newspaper La Solidaridad.', sources:['https://knightsofrizal.be/'] },
      { id:10, year:1889, place:'Paris & Brussels', coords: {x:49.5, y:41}, title:'Writing El Filibusterismo', summary:'Moved between Paris and Brussels while beginning to write his darker sequel, El Filibusterismo.', details:'Rizal moved between Paris and Brussels, continuing his reformist writings for La Solidaridad while developing his second novel, a darker and more revolutionary work.', sources:['https://travels-of-rizal.weebly.com/'] },
      { id:11, year:1891, date:'Sept 1891', place:'Ghent', coords: {x:49, y:40}, title:'El Filibusterismo Published', summary:'Moved to Ghent for cheaper printing and published El Filibusterismo in September 1891.', details:'To reduce costs, Rizal relocated to Ghent, where he finally completed and published his second novel, El Filibusterismo. He dedicated the book to the memory of the GomBurZa priests.', sources:['https://knightsofrizal.be/'] },
      { id:12, year:1891, date:'Oct–Nov 1891', place:'Hong Kong', coords: {x:87, y:72}, title:'Leaving Europe for Hong Kong', summary:'Left Europe for Hong Kong, where he opened a medical clinic and was reunited with his family.', details:'In late 1891, Rizal left Europe for Hong Kong, starting a new chapter by opening a successful ophthalmology clinic and continuing his reformist activities from Asia.', sources:['https://travels-of-rizal.weebly.com/'] }
    ];

    const svgNS = "http://www.w3.org/2000/svg";
    const mapSvg = document.getElementById('map-svg');
    const dTitle = document.getElementById('d-title');
    const dSub = document.getElementById('d-sub');
    const dBody = document.getElementById('d-body');
    const dSources = document.getElementById('d-sources');
    
    let currentIndex = 0;
    let showSources = true;

    function drawMap() {
      const pathData = "M " + events.map(p => `${p.coords.x / 100 * 1000} ${p.coords.y / 100 * 600}`).join(" L ");
      const routePath = document.createElementNS(svgNS, "path");
      routePath.setAttribute('d', pathData);
      routePath.setAttribute('class', 'travel-route');
      mapSvg.appendChild(routePath);
      
      events.forEach((event, i) => {
        const x = event.coords.x / 100 * 1000;
        const y = event.coords.y / 100 * 600;

        const pinGroup = document.createElementNS(svgNS, 'g');
        pinGroup.setAttribute('class', 'pin');
        pinGroup.setAttribute('transform', `translate(${x}, ${y})`);
        pinGroup.dataset.index = i;

        const pulseCircle = document.createElementNS(svgNS, 'circle');
        pulseCircle.setAttribute('class', 'pin-pulse');
        
        const mainCircle = document.createElementNS(svgNS, 'circle');
        mainCircle.setAttribute('class', 'pin-circle');
        
        const yearText = document.createElementNS(svgNS, 'text');
        yearText.setAttribute('class', 'pin-year');
        yearText.textContent = event.id;

        pinGroup.appendChild(pulseCircle);
        pinGroup.appendChild(mainCircle);
        pinGroup.appendChild(yearText);
        
        pinGroup.addEventListener('click', () => selectEvent(i));
        mapSvg.appendChild(pinGroup);
      });
    }

    function selectEvent(index) {
      const ev = events[index];
      if (!ev) return;
      currentIndex = index;

      dTitle.textContent = ev.title;
      dSub.textContent = `${ev.date} • ${ev.place}`;
      dBody.textContent = ev.details;

      if (showSources) {
        dSources.innerHTML = `Sources:<br>${ev.sources.map(s => `<a href="${s}" target="_blank" rel="noopener">${s}</a>`).join('<br>')}`;
        dSources.style.display = 'block';
      } else {
        dSources.style.display = 'none';
      }

      document.querySelectorAll('.pin').forEach((pin) => {
        pin.classList.toggle('active', pin.dataset.index == index);
      });
    }

    function toggleSources() {
      showSources = !showSources;
      document.getElementById('toggle-sources').classList.toggle('active', showSources);
      selectEvent(currentIndex);
    }
    
    document.getElementById('next').addEventListener('click', () => selectEvent((currentIndex + 1) % events.length));
    document.getElementById('prev').addEventListener('click', () => selectEvent((currentIndex - 1 + events.length) % events.length));
    document.getElementById('first').addEventListener('click', () => selectEvent(0));
    document.getElementById('last').addEventListener('click', () => selectEvent(events.length - 1));
    document.getElementById('toggle-sources').addEventListener('click', toggleSources);
    
    window.addEventListener('keydown', (ev) => {
      if(ev.key === 'ArrowRight') document.getElementById('next').click();
      if(ev.key === 'ArrowLeft') document.getElementById('prev').click();
    });

    document.addEventListener('DOMContentLoaded', () => {
      drawMap();
      document.getElementById('toggle-sources').classList.toggle('active', showSources);
      selectEvent(0);
    });
  </script>
</body>
</html>
