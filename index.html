<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>José Rizal — Europe Timeline (1882–1892)</title>
  <style>
    :root{
      --bg:#1b1410;
      --panel:#291e18;
      --muted:#8a6c5a;
      --accent:#c79a6b;
      --accent-2:#e0a76a;
      --text:#f4efe6;
      --shadow: rgba(0,0,0,0.6);
      --pin-size: 16px;
      --pin-size-active: 22px;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#0f0b09);color:var(--text);overflow: hidden;}
    .wrap{
      max-width:1400px;
      height: 100%;
      margin:0 auto;
      padding:24px;
      display:grid;
      grid-template-columns:340px 1fr;
      grid-template-rows: 1fr;
      gap:24px;
    }
    header.card{
      background:var(--panel);
      border-radius:14px;
      padding:20px;
      box-shadow:0 8px 30px var(--shadow);
      display: flex;
      flex-direction: column;
    }
    header h1{margin:0;font-size:22px;letter-spacing:0.3px;color: var(--accent-2);}
    header p{color:var(--muted);margin-top:8px;font-size:14px;line-height:1.5}
    .details{flex-grow: 1; overflow-y: auto; margin-top: 16px; padding-right: 10px;}
    .details h2{margin: 12px 0 4px; font-size: 18px;}
    .details .meta{color:var(--muted);font-size:13px; margin-bottom: 12px;}
    .details .body-text{line-height: 1.6; font-size: 15px; white-space: pre-wrap;}
    .details .sources{margin-top:16px;font-size:12px;color:var(--muted);border-top: 1px solid rgba(255,255,255,0.05); padding-top: 12px;}
    .details .sources a{color: var(--accent); text-decoration: none;}
    .details .sources a:hover{text-decoration: underline;}

    .controls{display:flex;flex-wrap: wrap; gap:8px;margin:16px 0}
    .btn{background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.1);padding:8px 12px;border-radius:8px;color:var(--text);cursor:pointer; font-size: 13px;}
    .btn:hover{background:rgba(255,255,255,0.1);}
    .btn.active{background:linear-gradient(90deg,var(--accent) 0%, var(--accent-2) 100%);color:#2b1b14;font-weight:600;border-color: transparent;}

    .map-area{
      position:relative;
      border-radius:14px;
      height: 100%;
      box-shadow:0 8px 30px var(--shadow);
      background-color: #0f0b09;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="600" viewBox="0 0 1000 600"><path d="M499.9 599.9C223.8 599.9 0 465.6 0 299.9S223.8 0 499.9 0s500 134.3 500 299.9-223.9 300-500 300z" fill-opacity=".02" fill="%23fff"/><path d="M499.9 545.4C251.4 545.4 45.4 435.9 45.4 299.9S251.4 54.4 499.9 54.4s454.5 109.5 454.5 245.5-206 245.5-454.5 245.5z" fill-opacity=".02" fill="%23fff"/><path d="M499.9 490.9c-223.3 0-403.4-90-403.4-200.9S276.6 89.1 499.9 89.1s403.4 90 403.4 200.9-180.1 200.9-403.4 200.9z" fill-opacity=".02" fill="%23fff"/><path d="M499.9 436.4C302 436.4 140.9 376.1 140.9 300S302 163.6 499.9 163.6s359.1 60.3 359.1 136.4-261.2 136.4-359.1 136.4z" fill-opacity=".02" fill="%23fff"/><g fill="none" stroke="%23fff" stroke-opacity=".05"><path d="M500 0v600M0 300h1000M140.9 163.6C205.2 108 340 54.4 500 54.4s294.8 53.6 359.1 109.2"/><path d="M45.4 54.4C136.6 15.7 304.7 0 500 0s363.4 15.7 454.6 54.4M45.4 545.6c91.2 38.7 259.3 54.4 454.6 54.4s363.4-15.7 454.6-54.4M140.9 436.4c64.3 55.6 199.1 109.2 359.1 109.2s294.8-53.6 359.1-109.2"/></g></svg>');
      background-size: cover;
      background-position: center;
      overflow: hidden;
    }
    .map-svg{position: absolute; inset: 0; width: 100%; height: 100%;}
    .travel-route{stroke: var(--muted); stroke-width: 2px; fill: none; stroke-dasharray: 4; animation: dash 20s linear infinite;}
    @keyframes dash {to {stroke-dashoffset: -100;}}
    .pin{cursor: pointer; transition: all 0.3s ease;}
    .pin-circle{fill: var(--accent-2); r: calc(var(--pin-size) / 2);}
    .pin-pulse{fill: var(--accent-2); opacity: 0.2; r: calc(var(--pin-size) / 2); animation: pulse 2s infinite;}
    @keyframes pulse {0% {transform: scale(0.9); opacity: 0.2;} 70% {transform: scale(2.5); opacity: 0;} 100% {transform: scale(2.5); opacity: 0;}}
    .pin.active .pin-circle{fill: var(--accent); r: calc(var(--pin-size-active) / 2); filter: drop-shadow(0 0 8px var(--accent));}
    .pin.active .pin-pulse{display: none;}
    .pin-year{fill: var(--text); font-size: 9px; font-weight: bold; text-anchor: middle; alignment-baseline: central; pointer-events: none;}

    @media (max-width:900px){
      body{overflow: auto;}
      .wrap{grid-template-columns:1fr; grid-template-rows: auto 1fr; padding: 12px; height: auto;}
      .map-area{min-height: 50vh;}
      header.card{height: auto;}
      .details{margin-top: 0; height: 300px; padding-right: 5px;}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header class="card">
      <div>
        <h1>José Rizal — Europe Timeline</h1>
        <p>A timeline of Rizal's ten-year journey (1882–1892), from his departure from Manila to his years in Europe. Click any pin to explore events.</p>
        <div class="controls">
          <button class="btn" id="first">First</button>
          <button class="btn" id="prev">‹ Prev</button>
          <button class="btn" id="next">Next ›</button>
          <button class="btn" id="last">Last</button>
          <button class="btn" id="toggle-sources">Toggle Sources</button>
        </div>
      </div>
      <div class="details" id="details">
        <h2 id="d-title">Select an event</h2>
        <div class="meta" id="d-sub"></div>
        <p class="body-text" id="d-body">Click any numbered pin on the map to view the details here.</p>
        <div class="sources" id="d-sources"></div>
      </div>
    </header>

    <main class="map-area" id="map">
        <svg class="map-svg" id="map-svg" viewBox="0 0 1000 600" preserveAspectRatio="xMidYMid meet"></svg>
    </main>

  </div>

  <script>
    const events = [
      { id:1, date:'1882', place:'Spain', coords: {x:46, y:53}, title:'First Arrival in Europe', 
        details:'May 3, 1882 – Left Manila aboard the Salvadora without informing Spanish authorities, to avoid being blocked.\n\nJune 15, 1882 – Arrived in Barcelona, Spain. Wrote his essay Amor Patrio (Love of Country), his first article published in a Philippine newspaper (Diariong Tagalog).\n\nNovember 1882 – Moved to Madrid and enrolled at the Universidad Central de Madrid.\n• Took Medicine (to cure his mother’s blindness).\n• Took Philosophy and Letters for intellectual training.\n• Met Filipino students and reformists; began joining discussions on liberty and nationalism.', 
        sources:['https://travels-of-rizal.weebly.com', 'https://philembassymadrid.com'] },
      { id:2, date:'1883', place:'Madrid', coords: {x:44, y:54}, title:'Student Life in Madrid', 
        details:'Continued studies; excelled in both academics and arts.\n\nFrequently wrote poetry, essays, and letters home.\n\nBegan short travels during school breaks, including to Paris.\n\nLearned French, expanding his multilingual abilities.', 
        sources:['https://travels-of-rizal.weebly.com'] },
      { id:3, date:'1884', place:'Madrid', coords: {x:44.2, y:54.2}, title:'Academic Success', 
        details:'Finished his Licentiate in Medicine.\n\nAttended gatherings of Filipino reformists in Madrid cafés.\n\nGave a famous toast in honor of Juan Luna (painter of Spoliarium) and Felix Resurrección Hidalgo (painter of Virgenes Cristianas Expuestas al Populacho), praising Filipino talent.\n\nExperienced worsening financial problems—survived on loans from friends.', 
        sources:['https://knightsofrizal.be'] },
      { id:4, date:'1885', place:'Madrid', coords: {x:44.4, y:54.4}, title:'Graduation and Decision to Specialize', 
        details:'Earned his Licentiate in Philosophy and Letters.\n\nDecided to further specialize in ophthalmology, influenced by his mother’s eye illness.\n\nPlanned further studies in Paris and Germany.', 
        sources:['https://travels-of-rizal.weebly.com'] },
      { id:5, date:'1885–1886', place:'Paris, France', coords: {x:48.5, y:42}, title:'Ophthalmology Training in Paris', 
        details:'Lived in Paris, working under Dr. Louis de Wecker, a leading eye specialist.\n\nLearned advanced surgical techniques.\n\nParis was costly, so he endured financial hardship, sometimes skipping meals.\n\nDespite struggles, he explored museums and libraries, strengthening his cultural knowledge.', 
        sources:['https://travels-of-rizal.weebly.com'] },
      { id:6, date:'1886', place:'Heidelberg, Germany', coords: {x:52, y:43}, title:'Advanced Studies in Heidelberg', 
        details:'Transferred to Heidelberg to study at the University Eye Hospital under Dr. Otto Becker.\n\nPracticed ophthalmology and trained with microscopes.\n\nLived a disciplined lifestyle and joined German student life.\n\nWrote the nostalgic poem A Las Flores de Heidelberg, expressing homesickness for the Philippines.', 
        sources:['https://knightsofrizal.be'] },
      { id:7, date:'Late 1886', place:'Leipzig, Germany', coords: {x:55, y:39}, title:'Intellectual Pursuits in Leipzig', 
        details:'Moved to Leipzig, attended philosophy and history lectures.\n\nTranslated German works into Tagalog, strengthening his sense of national identity.\n\nAdmired German efficiency, discipline, and education system.', 
        sources:['https://knightsofrizal.be'] },
      { id:8, date:'1886–1887', place:'Berlin, Germany', coords: {x:56, y:37}, title:'Publication of Noli Me Tángere', 
        details:'Settled in Berlin, where life was cheaper than Paris.\n\nBecame a member of scholarly societies: Anthropological Society and Ethnological Society of Berlin.\n\nMet intellectuals like Dr. Rudolf Virchow (scientist) and Dr. Wilhelm Joest (anthropologist).\n\nLived in poverty—wrote to family about missing meals and wearing old clothes.\n\nMarch 1887 – Published his first novel, Noli Me Tangere, exposing abuses in the Philippines.', 
        sources:['https://travels-of-rizal.weebly.com', 'https://knightsofrizal.be'] },
      { id:9, date:'1888', place:'London, England', coords: {x:46.5, y:39}, title:'Historical Research in London', 
        details:'Arrived in London (May 1888).\n\nResearched at the British Museum; studied Antonio de Morga’s Sucesos de las Islas Filipinas to prove pre-colonial Filipino civilization.\n\nWrote articles for La Solidaridad, the reformist newspaper.\n\nLived with the Beckett family, becoming close to Gertrude Beckett, but avoided romance to stay focused on his mission.', 
        sources:['https://knightsofrizal.be'] },
      { id:10, date:'1889–1890', place:'Paris & Brussels', coords: {x:49.5, y:41}, title:'Writing El Filibusterismo', 
        details:'Returned to Paris, then moved to Brussels because it was cheaper.\n\nContinued contributing essays to La Solidaridad.\n\nBegan and developed his second novel, El Filibusterismo, a darker continuation of Noli Me Tangere.\n\nIn Brussels, he also wrote essays and letters criticizing colonial abuses.', 
        sources:['https://travels-of-rizal.weebly.com'] },
      { id:11, date:'1891', place:'Ghent, Belgium', coords: {x:49, y:40}, title:'Publication of El Filibusterismo', 
        details:'Moved to Ghent to save money on printing costs.\n\nStruggled financially but refused to abandon his book.\n\nWith help from Filipino friends, especially Valentin Ventura, he was able to publish El Filibusterismo in September 1891.\n\nDedicated the book to the martyred priests, GomBurZa (Gómez, Burgos, Zamora).', 
        sources:['https://knightsofrizal.be'] },
      { id:12, date:'1891–1892', place:'Hong Kong', coords: {x:87, y:72}, title:'Leaving Europe for Hong Kong', 
        details:'October–November 1891 – Left Europe for Hong Kong.\n\nOpened a medical clinic and treated patients, including his mother.\n\nReunited with family members in Hong Kong.\n\nThis period marked the end of his 10 years in Europe and the beginning of his final years of reform work in Asia and the Philippines.', 
        sources:['https://travels-of-rizal.weebly.com'] }
    ];

    const svgNS = "http://www.w3.org/2000/svg";
    const mapSvg = document.getElementById('map-svg');
    const dTitle = document.getElementById('d-title');
    const dSub = document.getElementById('d-sub');
    const dBody = document.getElementById('d-body');
    const dSources = document.getElementById('d-sources');
    
    let currentIndex = 0;
    let showSources = true;

    function drawMap() {
      const pathCoords = [ {x:88, y:80}, ...events.map(e => e.coords)];
      const pathData = "M " + pathCoords.map(p => `${p.x / 100 * 1000} ${p.y / 100 * 600}`).join(" L ");
      const routePath = document.createElementNS(svgNS, "path");
      routePath.setAttribute('d', pathData);
      routePath.setAttribute('class', 'travel-route');
      mapSvg.appendChild(routePath);
      
      events.forEach((event, i) => {
        const x = event.coords.x / 100 * 1000;
        const y = event.coords.y / 100 * 600;

        const pinGroup = document.createElementNS(svgNS, 'g');
        pinGroup.setAttribute('class', 'pin');
        pinGroup.setAttribute('transform', `translate(${x}, ${y})`);
        pinGroup.dataset.index = i;

        const pulseCircle = document.createElementNS(svgNS, 'circle');
        pulseCircle.setAttribute('class', 'pin-pulse');
        
        const mainCircle = document.createElementNS(svgNS, 'circle');
        mainCircle.setAttribute('class', 'pin-circle');
        
        const yearText = document.createElementNS(svgNS, 'text');
        yearText.setAttribute('class', 'pin-year');
        yearText.textContent = event.id;

        pinGroup.appendChild(pulseCircle);
        pinGroup.appendChild(mainCircle);
        pinGroup.appendChild(yearText);
        
        pinGroup.addEventListener('click', () => selectEvent(i));
        mapSvg.appendChild(pinGroup);
      });
    }

    function selectEvent(index) {
      const ev = events[index];
      if (!ev) return;
      currentIndex = index;

      dTitle.textContent = `(${ev.id}) ${ev.title}`;
      dSub.textContent = `${ev.date} • ${ev.place}`;
      dBody.textContent = ev.details;

      if (showSources) {
        dSources.innerHTML = `📖 Sources:<br>${ev.sources.map(s => `<a href="https://${s}" target="_blank" rel="noopener">${s}</a>`).join('<br>')}`;
        dSources.style.display = 'block';
      } else {
        dSources.style.display = 'none';
      }

      document.querySelectorAll('.pin').forEach((pin) => {
        pin.classList.toggle('active', pin.dataset.index == index);
      });
    }

    function toggleSources() {
      showSources = !showSources;
      document.getElementById('toggle-sources').classList.toggle('active', showSources);
      selectEvent(currentIndex);
    }
    
    document.getElementById('next').addEventListener('click', () => selectEvent((currentIndex + 1) % events.length));
    document.getElementById('prev').addEventListener('click', () => selectEvent((currentIndex - 1 + events.length) % events.length));
    document.getElementById('first').addEventListener('click', () => selectEvent(0));
    document.getElementById('last').addEventListener('click', () => selectEvent(events.length - 1));
    document.getElementById('toggle-sources').addEventListener('click', toggleSources);
    
    window.addEventListener('keydown', (ev) => {
      if(ev.key === 'ArrowRight') document.getElementById('next').click();
      if(ev.key === 'ArrowLeft') document.getElementById('prev').click();
    });

    document.addEventListener('DOMContentLoaded', () => {
      drawMap();
      document.getElementById('toggle-sources').classList.toggle('active', showSources);
      selectEvent(0);
    });
  </script>
</body>
</html>
